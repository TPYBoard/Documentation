
[Micropython]TPYBoard F407 快速入手教程
======================================================================

版权声明：翻译整理属于TPYBoard，转载时请以超链接形式标明文章原始出处和作者信息及本声明

前言
----------------------

当你第一次接触TPYBoard F407时，或许有些疑惑，不知道该如何使用它。不用担心，当你认真阅读完本篇文章后，保证你用起来游刃有余。


初次见面
----------------------
 

初次见到TPYBoard F407（以下简称F407）时，我们首先通过micro接口的USB数据线将F407接入电脑。这时，你会看到开发板上的4个LED呈现流水灯的效果，这是我们的出厂默认程序。

一般情况下，电脑会自动出现一个类似U盘的可移动磁盘 ``TPYBFLASH``  如下：
 
.. image:: img/flash.png

也有可能有的小伙伴的电脑，不能自动安装时，可安装驱动人生进行USB驱动的修复。

`可参考教程 <https://www.kafan.cn/edu/86015156.html>`_

深入了解
----------------------

打开 ``TPYBFLASH`` 可以看到里面默认有4个文件：

 - ``boot.py`` 开发板启动配置文件，例如可以设置开发板USB设备的模式（CDC、MSC、HID）或者指定第一个运行的脚本等。
 - ``main.py`` 默认第一个运行的脚本，可在boot.py中进行设置。
 - ``README.txt`` 一些帮助信息。
 - ``tpybcdc.inf`` 开发板的USB转虚拟串口的驱动，可用于repl调试。（下一篇讲解如何使用REPL调试）

编辑器的选择
>>>>>>>>>>>>>>>>>

在后面的开发中，主要是在main.py文件中进行编程实现功能。那我们该如何挑选合适的编辑器呢？

其实对于一个脚本文件来说，任何一个编辑工具都可以。但最好别直接使用文本文档，这样会使代码格式乱掉。你要明白Python是通过缩进来区分代码块的，有的人会使用空格缩进，而大部分的人会使用tab键缩进，不同的编辑器会有不同的tab缩进规则，所以就会导致直接拷贝过来的程序运行会出错等。无论是哪一种缩进方式，只要保证整体一致即可。

如果出现“SyntaxError: invalid syntax“错误：可能就是tab和空格没对齐的问题。
如果出现“IndentationError: unindent does not match any outer indentation level”错误：可能就是使用的缩进方式不一致。

**不在REPL调试模式下，我们是看不到错误信息的，但是当你发现开发板上出现D2和D3两个LED交替闪烁几次后熄灭的情况，就说明程序出现了错误。**


*代码编辑器*

推荐Visual Studio Code、Notepad++、PyCharm、Python IDLE。VSCode和PyCharm都可以安装micropython的插件，支持代码提示补全和REPL调试。Notepad++在win10下会出现文件损坏的BUG。

和谐相处
----------------------------

为了防止代码丢失，养成良好的编程习惯，建议在电脑本地编写好main.py后直接覆盖 ``TPYBFLASH`` 中的main.py文件，不要直接在 ``TPYBFLASH`` 中编辑。

接下来，我们写一段代码，点亮板载的第2个LED。新建一个main.py文件，输入下面的代码。

.. code-block:: python

    import pyb
    pyb.LED(2).on()

将编写好的main.py文件拷贝替换到 ``TPYBFLASH`` 里的mian.py文件。

.. image:: img/copy.gif

**注意：文件覆盖、修改保存时，板载的红色LED（D2）会亮起，说明正在写入板子内部FLASH，需等待熄灭后再进行其他操作。** 

保存完毕后，按下板载的RST按键进行复位，板载的红色LED（D3）就会亮起。

